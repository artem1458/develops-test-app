(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(t,e,n){t.exports=n(56)},52:function(t,e,n){},54:function(t,e,n){},56:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"getAllPosts",function(){return j}),n.d(r,"selectPost",function(){return _}),n.d(r,"getPostDetails",function(){return D}),n.d(r,"clearSelectedPost",function(){return L}),n.d(r,"postComment",function(){return T}),n.d(r,"commentChange",function(){return x});var a=n(0),o=n.n(a),c=n(21),u=n.n(c),i=n(14),s=n(11),l=n(35),p=n(36),d=n(20),m=n(9),f={postsList:[],selectedPost:0,postDetails:{},userCommentValue:"",isLoading:!0},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_LOADING_TRUE":return Object(m.a)({},t,{isLoading:!0});case"SET_LOADING_FALSE":return Object(m.a)({},t,{isLoading:!1});case"PUSH_NEW_POSTS":return Object(m.a)({},t,{postsList:[].concat(Object(d.a)(t.postsList),Object(d.a)(e.payload))});case"SET_SELECTED_POST":return Object(m.a)({},t,{selectedPost:e.payload});case"SET_POST_DETAILS":return Object(m.a)({},t,{postDetails:e.payload});case"CLEAR_POST_DETAILS":return Object(m.a)({},t,{postDetails:{}});case"SET_USER_COMMENT_VALUE":return Object(m.a)({},t,{userCommentValue:e.payload});case"CLEAR_USER_COMMENT_VALUE":return Object(m.a)({},t,{userCommentValue:""});case"ADD_NEW_COMMENT":return Object(m.a)({},t,{postDetails:Object(m.a)({},t.postDetails,{comments:e.payload})});default:return t}},b=n(18),h=n(12),v=n(15),O=n(22),g=n(24),y=n(23),S=n(25),j=function(){return function(t,e,n){n.getAllPosts().then(function(e){t({type:"SET_LOADING_FALSE"}),t({type:"PUSH_NEW_POSTS",payload:e})}).catch(function(t){console.error(t)})}},_=function(t){return function(e){e({type:"SET_SELECTED_POST",payload:t})}},D=function(){return function(t,e,n){t({type:"SET_LOADING_TRUE"});var r=e().selectedPost;n.getDetailsOfPost(r).then(function(e){t({type:"SET_POST_DETAILS",payload:e}),t({type:"SET_LOADING_FALSE"})}).catch(function(t){console.error(t)})}},L=function(){return function(t){t({type:"SET_SELECTED_POST",payload:0}),t({type:"CLEAR_POST_DETAILS"})}},T=function(){return function(t,e,n){var r=e(),a=r.selectedPost,o=r.userCommentValue;0!==o.length&&n.postComment({postId:a,body:o}).then(function(n){var r=e().postDetails.comments;t({type:"CLEAR_USER_COMMENT_VALUE"}),t({type:"ADD_NEW_COMMENT",payload:[].concat(Object(d.a)(r),[n])})}).catch(function(t){console.error(t)})}},x=function(t){return function(e){e({type:"SET_USER_COMMENT_VALUE",payload:t})}},C=n(2),w=n(3);function P(){var t=Object(C.a)(["\n  font-size: 1.5em;\n  text-align: left;\n  color: #5a5a5a;\n"]);return P=function(){return t},t}var A=w.a.h1(P());function k(){var t=Object(C.a)(["\n  box-sizing: border-box;\n  border: 2px solid #78c2ad;\n  border-radius: 3px;\n  margin-bottom: 10px;\n  padding: 5px;\n  min-height: 100px;\n  transition-duration: 0.2s;\n  ",";\n"]);return k=function(){return t},t}var N=w.a.div(k(),function(t){return t.interactive?"&:hover{ border: 6px solid #78c2ad; cursor: pointer }":null});function I(){var t=Object(C.a)(["\n  font-size: .8em\n  font-weight: lighter;\n  text-align: left;\n"]);return I=function(){return t},t}var M=w.a.span(I());function U(){var t=Object(C.a)(["\n  word-wrap: break-word;\n  font-size: 1.1em\n  text-align: left;\n"]);return U=function(){return t},t}var V=w.a.p(U());function R(){var t=Object(C.a)(["\n  font-family: 'Montserrat', sans-serif;\n  background-color: #f7f7f9;\n  border-radius: 0.6rem;\n  width: 80vw;\n  height: 90vh;\n  margin: 10px auto;\n  padding: 0.8em;\n  overflow: auto;\n  box-shadow: 0px 21px 17px -5px rgba(0, 0, 0, 0.2);\n"]);return R=function(){return t},t}var W=w.a.div(R());function z(){var t=Object(C.a)(["\n  background-color: #78c2ad;\n  border: none;\n  height: 30px;\n  margin-top: 5px;\n  transition-duration: 0.2s;\n\n  &:hover {\n    background-color: #4caf50;\n    color: white;\n  }\n"]);return z=function(){return t},t}var G=w.a.button(z());function B(){var t=Object(C.a)(["\n  padding: 0.8em;\n  resize: none;\n"]);return B=function(){return t},t}var F=w.a.textarea(B());function J(){var t=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 0.8rem;\n"]);return J=function(){return t},t}var H=w.a.div(J()),q=function(t){var e=t.id,n=t.title,r=t.body,a=t.date,c=t.onPostSelected;return o.a.createElement(N,{onClick:function(){return c(e)},interactive:!0},a?o.a.createElement(M,null,"Date: ",a):null,o.a.createElement(A,null,n),o.a.createElement(V,null,r))},K=function(t){function e(){return Object(v.a)(this,e),Object(g.a)(this,Object(y.a)(e).apply(this,arguments))}return Object(S.a)(e,t),Object(O.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.postsList,e=this.props.getAllPosts;0===t.length&&e()}},{key:"render",value:function(){var t=this.props,e=t.postsList,n=t.isLoading,r=this.props.onPostSelected;if(n)return o.a.createElement(W,null,"Loading...");var a=e.map(function(t){var e=t.id,n=t.title,a=t.body,c=void 0===a?"":a,u=t.date,i=void 0===u?0:u,s=c.length>40?"".concat(c.slice(0,40),"..."):c;return o.a.createElement(q,{key:e,id:e,title:n,body:s,date:i,onPostSelected:r})});return o.a.createElement(W,null,a)}}]),e}(a.Component),Q=Object(s.b)(function(t){return{postsList:t.postsList,isLoading:t.isLoading}},r)(K),X=function(t){var e=t.comment,n=e.body,r=e.id;return o.a.createElement(N,null,o.a.createElement(M,null,"Comment ID: ",r),o.a.createElement(V,null,n))},Y=Object(s.b)(function(t){return{userCommentValue:t.userCommentValue}},r)(function(t){var e=t.userCommentValue,n=t.commentChange,r=t.postComment;return o.a.createElement(H,null,o.a.createElement(F,{placeholder:"Add your comment",type:"text",value:e,onChange:function(t){var e=t.target;return n(e.value)}}),o.a.createElement(G,{type:"submit",onClick:function(t){return function(t,e){t.preventDefault(),e()}(t,r)},value:"Add comment"},"Add a comment"))}),Z=(n(52),function(t){function e(){return Object(v.a)(this,e),Object(g.a)(this,Object(y.a)(e).apply(this,arguments))}return Object(S.a)(e,t),Object(O.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.postId,e=this.props,n=e.selectPost,r=e.getPostDetails;n(t),r()}},{key:"componentWillUnmount",value:function(){(0,this.props.clearSelectedPost)()}},{key:"render",value:function(){var t=this.props,e=t.postDetails,n=e.title,r=e.creator,a=e.body,c=e.comments,u=void 0===c?[]:c,i=e.date;if(t.isLoading)return o.a.createElement(W,null,"Loading...");var s=r?o.a.createElement(V,null,r):null,l=i?o.a.createElement(M,null,"Date: ",i):null,p=a?o.a.createElement(V,null,a):null,d=u.length>0?u.map(function(t){return o.a.createElement(X,{key:t.id,comment:t})}).reverse():o.a.createElement("span",null,"No comments for this post");return o.a.createElement(W,null,o.a.createElement(b.b,{to:"/",className:"link-to-main"},"<="),o.a.createElement(A,null,n),s,l,p,o.a.createElement(Y,null),o.a.createElement(N,null,d))}}]),e}(a.Component)),$=Object(s.b)(function(t){return{postDetails:t.postDetails,isLoading:t.isLoading}},r)(Z),tt=Object(h.e)(function(t){var e=t.history;return o.a.createElement(Q,{onPostSelected:function(t){return e.push("/posts/".concat(t))}})}),et=function(t){var e=t.postId;return o.a.createElement($,{postId:e})},nt=(n(54),function(){return o.a.createElement("div",{className:"app"},o.a.createElement(b.a,{basename:"/develops-test-app"},o.a.createElement(h.a,{path:"/",component:tt,exact:!0}),o.a.createElement(h.a,{path:"/posts/:id",render:function(t){var e=t.match.params.id;return o.a.createElement(et,{postId:e})}})))}),rt=n(8),at=n.n(rt),ot=n(17),ct=new function t(){var e=this;Object(v.a)(this,t),this.apiBase="https://simple-blog-api.crew.red",this.getData=function(){var t=Object(ot.a)(at.a.mark(function t(n){var r;return at.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.apiBase).concat(n));case 2:if((r=t.sent).ok){t.next=5;break}throw new Error("Could not fetch, received ".concat(r.status));case 5:return t.abrupt("return",r.json());case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.postData=function(){var t=Object(ot.a)(at.a.mark(function t(n,r){var a;return at.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.apiBase).concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 2:if(201===(a=t.sent).status){t.next=5;break}throw new Error("Could not post, received ".concat(a.status));case 5:return t.abrupt("return",a.json());case 6:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),this.getAllPosts=Object(ot.a)(at.a.mark(function t(){return at.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getData("/posts/"));case 1:case"end":return t.stop()}},t)})),this.getDetailsOfPost=function(){var t=Object(ot.a)(at.a.mark(function t(n){return at.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getData("/posts/".concat(n,"?_embed=comments")));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.postComment=function(){var t=Object(ot.a)(at.a.mark(function t(n){return at.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.postData("/comments",n));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ut=Object(i.createStore)(E,Object(p.composeWithDevTools)(Object(i.applyMiddleware)(l.a.withExtraArgument(ct))));u.a.render(o.a.createElement(s.a,{store:ut},o.a.createElement(nt,null)),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.71b416e4.chunk.js.map